# Модуль 3 (Task 3)  
## Создание признаков: скользящее окно с агрегацией  

### Описание задачи  
Данный модуль демонстрирует приём **feature engineering** — создание новых признаков с помощью **скользящего окна (rolling window)**.  
На основе датасета *Iris* вычисляются агрегаты (среднее, минимум, максимум, стандартное отклонение) внутри окна фиксированного размера для каждой категории `species`.

> **Задача:**  
> Для каждого вида (`species`) добавить статистические признаки по окну из 5 наблюдений:
> - `rolling mean`  
> - `rolling min`  
> - `rolling max`  
> - `rolling std`

**Baseline и метрики:**  
- **Baseline:** новые признаки успешно созданы и сохранены в CSV.  
- **Метрика:** на графиках видна динамика значений rolling-агрегатов.

---

### Структура решения  

| Функция | Назначение |
|----------|------------|
| `build_dataset_from_DA_1_07()` | Загружает исходные данные Iris через файл `DA_1_07.py` и добавляет категориальный признак `species`. |
| `compute_rolling_stats()` | Вычисляет rolling-агрегаты (`mean`, `min`, `max`, `std`) по каждой группе `species`. |
| `plot_rolling_stats()` | Строит 4 графика с динамикой rolling-показателей для каждой категории. |
| `save_dataframe_csv()` | Сохраняет итоговый DataFrame в CSV файл. |
| `main()` | Точка входа CLI: парсит аргументы, запускает всю цепочку обработки и рисует графики. |

---

### Логика работы  
1. **Загрузка данных**  
   Используются функции из `DA_1_07.py`: `load_iris_dataset()` и `create_categorical_feature()`.  
2. **Расчёт скользящих статистик**  
   Для выбранного числового признака (`sepal length (cm)`) внутри каждой группы `species` вычисляются `mean`, `min`, `max`, `std` в окне из 5 наблюдений.  
3. **Добавление новых признаков**  
   Результаты добавляются в тот же DataFrame в виде новых столбцов:  
   - `<value_col>_roll_mean5`  
   - `<value_col>_roll_min5`  
   - `<value_col>_roll_max5`  
   - `<value_col>_roll_std5`  
4. **Визуализация**  
   Для каждой статистики строится отдельный график, показывающий изменение показателя по индексу наблюдений внутри вида.  
5. **Сохранение результата**  
   Итоговая таблица записывается в CSV-файл `iris_DA-3-29_roll_features.csv`.

---

### Пример запуска  
Убедитесь, что рядом находятся файлы `DA_1_07.py` и `compute_rolling_features.py`, а также установлены зависимости:  

```bash
pip install pandas matplotlib scikit-learn
```

Запустите модуль:  
```bash
python compute_rolling_features.py
```

или с параметрами CLI:  
```bash
python compute_rolling_features.py   --value-col "sepal length (cm)"   --group-col species   --window 5   --min-periods 1   --out-csv iris_DA-3-29_roll_features.csv   --no-show
```

---

### Используемые библиотеки  
- **pandas** — обработка и агрегация данных  
- **matplotlib** — построение графиков  
- **scikit-learn** — загрузка датасета Iris  

---

### Результат работы  
- Файл `iris_DA-3-29_roll_features.csv` с новыми rolling-признаками.  
- 4 графика, иллюстрирующих динамику `mean`, `min`, `max`, `std` по времени внутри каждого вида Iris.